{% extends 'base.html' %}

{% block title %}Profile{% endblock %}

{% block content %}

    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/feed.css' %}">

    <link rel="stylesheet" href="https://unpkg.com/github-calendar@latest/dist/github-calendar-responsive.css"/>

    <div class="colContainer">
        {% include "sidebarLeft.html" %}
        <div class="column middle">

            <div class="add-btn">
                <!-- <img>{{ current_author_info.profileImage }}</a></img> -->
                <!-- <img scr="../images/avatar1.jpg", alt="user avatar", class="avatar"> -->
                <form action="{% url 'myapp:follow' %}" method="POST">
                    {% csrf_token %}
                    <img src="{{ current_author_info.profileImage }}"
                         class='avatar'/>
                    <div class="userInfo">user id: {{ current_author_info.id }}</div>
                    <div class="userInfo">name: {{ current_author_info.displayName }}</div>
                    <!-- <button class="followerButton">Follower</button> -->
                    <!-- <a href="#" class="followButton">Follower</a> -->
                    <span class="userInfo" style="padding: left;"><b>{{ count_following }}  Following</b></span>
                    <span class="userInfo" style="padding: 50px;"><b>{{ count_followers }}  Followers</b></span>
                    <input type="hidden" value="{{ user.username }}" name="follower"/>
                    <input type="hidden" value="{{ current_author_info.id }}" name="user"/>
                    {% if current_author_info.id == user.username %}
                        <a href="" data-ripple="">Edit Account</a>
                    {% else %}
                        <a data-ripple="">
                            <button type="submit"
                                    style="background-color: #ffc0cb; border: #ffc0cb;">{{ button_text }}</button>
                        </a>
                    {% endif %}
                </form>
                <!-- <button class="followerButton">Following</button> -->
                <div class="userInfo">github info: {{ current_author_info.github }}</a></div>

                <!-- reference: https://github.com/Bloggify/github-calendar -->
                <!-- Optionally, include the theme (if you don't want to struggle to write the CSS) -->
                <script src="https://cdn.rawgit.com/IonicaBizau/github-calendar/gh-pages/dist/github-calendar.min.js"></script>
                <br>
                <i class="fa fa-github" style="font-size:36px;"></i>
                <br>
                <a style="font-size: 20px;">Github Activity</a>
                <p>{{ github_username }}</p>

                <div class="calendar">
                    <!-- Loading stuff -->
                    <img src="https://github.githubassets.com/images/spinners/octocat-spinner-128.gif" class="spinner"/>
                    Loading the data just for you. If it doesn't show up, the github URL may be wrong.
                </div>

                <script>
                    new GitHubCalendar(".calendar", "{{ github_username }}");
                    var calendar = document.getElementsByClassName("calendar");
                    calendar[0].style.border = "none";
                </script>

                {% for post in posts.all%}
                    <div class="singlePost position-relative">
                        <div class="authorName">Author: {{ post.author.id }}</div>
                        <div class="postTitle">{{ post.title }}</div>
                        <div class="postBody">{{ post.description }}</div>
                        <div class="postTime">{{ post.published }}
                            <div class="postVis">Visibility: {{ post.visibility }}</div>
                        </div>
                        <!-- <div>UUID: {{ post.id }}</div> -->
                        <div class="postActions"><a href="{% url 'myapp:sharePost' post.id %}"><i class="fa-solid fa-share"></i>&ensp;Share</a>&emsp;<a
                                href="/like?post_id={{post.id}}"><i class="fa-solid fa-heart"></i>&ensp;{{post.likes}}</a>&emsp;<a
                                href="{% url 'myapp:postDetail' post.id %}"><i class="fa-solid fa-comment"></i>&ensp;{{ post.count }}&emsp;</a>
                        </div>
                        <a href="{% url 'myapp:postDetail' post.id %}" class="stretched-link"></a>
                    </div>
                {% endfor %}
            </div>
        </div>
        {% include "sidebarRight.html" %}
    </div>
{% endblock %}